# æ°´æœè”¬èœé‡‡è´­ç®¡ç†ç³»ç»Ÿ

ä¸€å¥—å®Œæ•´çš„æ°´æœè”¬èœé‡‡è´­ç®¡ç†è§£å†³æ–¹æ¡ˆï¼ŒåŒ…å«å‰åç«¯åˆ†ç¦»æ¶æ„ã€å®Œæ•´çš„æ¥å£æµ‹è¯•å’ŒUIè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
test-copy-senguo/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app.py                 # Flaskåº”ç”¨ä¸»æ–‡ä»¶
â”‚   â””â”€â”€ test_api.py            # åç«¯å•å…ƒæµ‹è¯•ï¼ˆpytestï¼‰
â”œâ”€â”€ frontend/                   # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ index.html             # ä¸»é¡µé¢
â”‚   â””â”€â”€ test_ui.py             # UIè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆpytest + seleniumï¼‰
â”œâ”€â”€ requirements.txt           # Pythonä¾èµ–
â”œâ”€â”€ start.sh                   # å¯åŠ¨åç«¯æœåŠ¡
â”œâ”€â”€ start_frontend.sh          # å¯åŠ¨å‰ç«¯æœåŠ¡
â”œâ”€â”€ run_tests.sh               # è¿è¡Œæµ‹è¯•
â””â”€â”€ README.md                  # æœ¬æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Python 3.8+
- pip
- ç°ä»£æµè§ˆå™¨ï¼ˆChrome/Firefoxï¼‰

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 3. å¯åŠ¨åç«¯æœåŠ¡

```bash
# æ–¹å¼1: ä½¿ç”¨å¯åŠ¨è„šæœ¬
chmod +x start.sh
./start.sh

# æ–¹å¼2: æ‰‹åŠ¨å¯åŠ¨
cd backend
python app.py
```

åç«¯æœåŠ¡è¿è¡Œåœ¨ `http://127.0.0.1:5000`

### 4. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆæ–°ç»ˆç«¯ï¼‰

```bash
# æ–¹å¼1: ä½¿ç”¨å¯åŠ¨è„šæœ¬
chmod +x start_frontend.sh
./start_frontend.sh

# æ–¹å¼2: æ‰‹åŠ¨å¯åŠ¨
cd frontend
python3 -m http.server 8000 --bind 127.0.0.1
```

å‰ç«¯æœåŠ¡è¿è¡Œåœ¨ `http://127.0.0.1:8000`

### 5. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://127.0.0.1:8000/frontend/index.html`

## ğŸ§ª æµ‹è¯•

### åç«¯å•å…ƒæµ‹è¯•

```bash
cd backend
pytest test_api.py -v
```

**æµ‹è¯•ç”¨ä¾‹åŒ…æ‹¬ï¼š**
- âœ… å¥åº·æ£€æŸ¥
- âœ… åˆ›å»ºé‡‡è´­å•æˆåŠŸ
- âœ… åˆ›å»ºé‡‡è´­å•å¤±è´¥ï¼ˆç¼ºå°‘å­—æ®µï¼‰
- âœ… åˆ›å»ºé‡‡è´­å•å¤±è´¥ï¼ˆæ— æ•ˆå‚æ•°ï¼‰
- âœ… è·å–é‡‡è´­å•åˆ—è¡¨
- âœ… æŒ‰åˆ†ç±»ç­›é€‰
- âœ… è·å–å•ä¸ªé‡‡è´­å•
- âœ… æ›´æ–°é‡‡è´­å•

### å‰ç«¯UIè‡ªåŠ¨åŒ–æµ‹è¯•

ç¡®ä¿åç«¯å’Œå‰ç«¯æœåŠ¡éƒ½åœ¨è¿è¡Œï¼Œç„¶åï¼š

```bash
cd frontend
pytest test_ui.py -v -s
```

**æµ‹è¯•ç”¨ä¾‹åŒ…æ‹¬ï¼š**
- âœ… é¡µé¢åŠ è½½
- âœ… å¯¼èˆªåŠŸèƒ½
- âœ… è¡¨å•å¡«å……
- âœ… è¡¨å•éªŒè¯
- âœ… é‡‡è´­å•æäº¤
- âœ… åˆ—è¡¨åŠ è½½
- âœ… å“åº”å¼è®¾è®¡
- âœ… äº¤äº’æµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
chmod +x run_tests.sh
./run_tests.sh
```

## ğŸ“± åŠŸèƒ½è¯´æ˜

### åç«¯API

#### 1. åˆ›å»ºé‡‡è´­å•
```
POST /api/purchase/create
Content-Type: application/json

{
  "supplier_name": "ä¾›åº”å•†åç§°",
  "product_name": "äº§å“åç§°",
  "quantity": 100,
  "unit_price": 10.5,
  "category": "æ°´æœ",  // æˆ– "è”¬èœ"
  "remark": "å¤‡æ³¨ä¿¡æ¯"  // å¯é€‰
}

Response:
{
  "code": 200,
  "message": "é‡‡è´­å•åˆ›å»ºæˆåŠŸ",
  "data": {
    "id": "PO1001",
    "supplier_name": "...",
    ...
  }
}
```

#### 2. è·å–é‡‡è´­å•åˆ—è¡¨
```
GET /api/purchase/list?category=æ°´æœ&status=å¾…å®¡æ‰¹

Response:
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "total": 10,
    "orders": [...]
  }
}
```

#### 3. è·å–é‡‡è´­å•è¯¦æƒ…
```
GET /api/purchase/{order_id}
```

#### 4. æ›´æ–°é‡‡è´­å•
```
PUT /api/purchase/{order_id}

{
  "status": "å·²æ‰¹å‡†",
  "remark": "æ–°å¤‡æ³¨"
}
```

#### 5. å¥åº·æ£€æŸ¥
```
GET /api/health
```

### å‰ç«¯åŠŸèƒ½

- ğŸ“‹ é‡‡è´­å•ç®¡ç†
  - æ–°å¢é‡‡è´­å•
  - æŸ¥çœ‹é‡‡è´­å•åˆ—è¡¨
  - æŸ¥çœ‹é‡‡è´­å•è¯¦æƒ…

- ğŸ¨ å“åº”å¼è®¾è®¡
  - æ”¯æŒç§»åŠ¨ç«¯
  - æ”¯æŒæ¡Œé¢ç«¯
  - æµç•…çš„ç”¨æˆ·ä½“éªŒ

- âœ¨ äº¤äº’ç‰¹æ•ˆ
  - æŒ‰é’®æ‚¬åœæ•ˆæœ
  - å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»
  - åŠ è½½çŠ¶æ€æç¤º

## ğŸ§© æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: Flask 3.0.0
- **æµ‹è¯•**: pytest 7.4.3
- **CORS**: flask-cors 4.0.0

### å‰ç«¯
- **è¯­è¨€**: HTML5 + CSS3 + JavaScript (Vanilla)
- **æµ‹è¯•**: pytest + selenium 4.15.2
- **å“åº”å¼**: CSS Grid + Flexbox

## ğŸ“Š æ•°æ®æ¨¡å‹

é‡‡è´­å•ï¼ˆPurchase Orderï¼‰ï¼š
```javascript
{
  id: "PO1001",                    // è®¢å•å·
  supplier_name: "ä¾›åº”å•†åç§°",      // ä¾›åº”å•†åç§°
  product_name: "äº§å“åç§°",         // äº§å“åç§°
  quantity: 100,                   // é‡‡è´­æ•°é‡
  unit_price: 10.5,                // å•ä»·
  total_amount: 1050.00,           // åˆè®¡é‡‘é¢ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰
  category: "æ°´æœ",                // åˆ†ç±»
  status: "å¾…å®¡æ‰¹",                // çŠ¶æ€
  created_at: "2024-01-01 10:00:00", // åˆ›å»ºæ—¶é—´
  created_by: "ç³»ç»Ÿ",              // åˆ›å»ºäºº
  remark: "å¤‡æ³¨ä¿¡æ¯"               // å¤‡æ³¨
}
```

## ğŸ” é”™è¯¯å¤„ç†

ç³»ç»Ÿå…·æœ‰å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

- **400 Bad Request**: è¯·æ±‚å‚æ•°é”™è¯¯
- **404 Not Found**: èµ„æºä¸å­˜åœ¨
- **500 Internal Server Error**: æœåŠ¡å™¨é”™è¯¯

## ğŸ¯ å¼€å‘ä¸­çš„åŠŸèƒ½

- è®¢è´§å•ç®¡ç†
- é‡‡è´­é€€è´§å¤„ç†
- è´¨æ£€ç®¡ç†
- åº”ä»˜æ¬¾ç®¡ç†
- è§„æ ¼åˆ†é€‰
- æˆå“åŠ å·¥
- åŒ…è£…æ–¹æ¡ˆ
- æˆæœ¬æ ¸ç®—
- é”€å”®å•ç®¡ç†
- å‘è´§å•ç®¡ç†

## ğŸ“ æ—¥å¿—è¾“å‡º

### åç«¯æ—¥å¿—ç¤ºä¾‹
```
==================================================
æ°´æœè”¬èœé‡‡è´­ç®¡ç†ç³»ç»Ÿ - åç«¯æœåŠ¡
==================================================
API æ–‡æ¡£:
  POST   /api/purchase/create  - åˆ›å»ºé‡‡è´­å•
  GET    /api/purchase/list    - è·å–é‡‡è´­å•åˆ—è¡¨
  GET    /api/purchase/<id>    - è·å–é‡‡è´­å•è¯¦æƒ…
  PUT    /api/purchase/<id>    - æ›´æ–°é‡‡è´­å•
  GET    /api/health           - å¥åº·æ£€æŸ¥
==================================================
å¯åŠ¨æœåŠ¡: http://127.0.0.1:5000
==================================================
 * Running on http://127.0.0.1:5000
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. åç«¯è¿æ¥å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**: ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œåœ¨ `http://127.0.0.1:5000`

### 2. CORS è·¨åŸŸé”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: ç¡®ä¿ flask-cors å·²æ­£ç¡®å®‰è£…å’Œé…ç½®

### 3. UIæµ‹è¯•æ‰¾ä¸åˆ°å…ƒç´ 
**è§£å†³æ–¹æ¡ˆ**: ç¡®ä¿å‰ç«¯é¡µé¢å®Œå…¨åŠ è½½ï¼Œè°ƒæ•´ç­‰å¾…æ—¶é—´

### 4. ChromeDriver ç‰ˆæœ¬ä¸åŒ¹é…
**è§£å†³æ–¹æ¡ˆ**: ä¸‹è½½ä¸Chromeæµè§ˆå™¨ç‰ˆæœ¬åŒ¹é…çš„ ChromeDriver

## ğŸ“š API æµ‹è¯•ç¤ºä¾‹

```bash
# åˆ›å»ºé‡‡è´­å•
curl -X POST http://127.0.0.1:5000/api/purchase/create \
  -H "Content-Type: application/json" \
  -d '{
    "supplier_name": "æµ‹è¯•ä¾›åº”å•†",
    "product_name": "è‹¹æœ",
    "quantity": 100,
    "unit_price": 5.5,
    "category": "æ°´æœ"
  }'

# è·å–é‡‡è´­å•åˆ—è¡¨
curl http://127.0.0.1:5000/api/purchase/list

# è·å–é‡‡è´­å•è¯¦æƒ…
curl http://127.0.0.1:5000/api/purchase/PO1001

# å¥åº·æ£€æŸ¥
curl http://127.0.0.1:5000/api/health
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¤ ä½œè€…

æ°´æœè”¬èœé‡‡è´­ç®¡ç†ç³»ç»Ÿå¼€å‘å›¢é˜Ÿ

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤Issueæˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

---

**æœ€åæ›´æ–°**: 2024å¹´1æœˆ12æ—¥

**ç‰ˆæœ¬**: 1.0.0
